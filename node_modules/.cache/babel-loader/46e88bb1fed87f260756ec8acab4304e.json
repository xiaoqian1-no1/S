{"remainingRequest":"F:\\1\\smart\\vue\\node_modules\\babel-loader\\lib\\index.js!F:\\1\\smart\\vue\\src\\utils\\request.js","dependencies":[{"path":"F:\\1\\smart\\vue\\src\\utils\\request.js","mtime":1763511760628},{"path":"F:\\1\\smart\\vue\\babel.config.js","mtime":1718183300000},{"path":"F:\\1\\smart\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735803512432},{"path":"F:\\1\\smart\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735803514062}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmNvbnN0IHJlcXVlc3QgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjkwOTAnLAogIHRpbWVvdXQ6IDUwMDAKfSk7CgovLyByZXF1ZXN0IOaLpuaIquWZqAovLyDlj6/ku6Xoh6ror7fmsYLlj5HpgIHliY3lr7nor7fmsYLlgZrkuIDkupvlpITnkIYKLy8g5q+U5aaC57uf5LiA5YqgdG9rZW7vvIzlr7nor7fmsYLlj4LmlbDnu5/kuIDliqDlr4YKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoY29uZmlnID0+IHsKICBjb25maWcuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JzsKICBsZXQgdXNlciA9IG51bGw7CiAgdHJ5IHsKICAgIGNvbnN0IHVzZXJTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpOwogICAgdXNlciA9IHVzZXJTdHIgPyBKU09OLnBhcnNlKHVzZXJTdHIpIDogbnVsbDsKICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmVycm9yKCfop6PmnpDnlKjmiLfkv6Hmga/lpLHotKU6JywgZSk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlciIpOyAvLyDmuIXpmaTmjZ/lnY/nmoTmlbDmja4KICAgIHVzZXIgPSBudWxsOwogIH0KICBpZiAodXNlciAmJiB1c2VyLnRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IHVzZXIudG9rZW47IC8vIOiuvue9ruivt+axguWktAogIH0KICByZXR1cm4gY29uZmlnOwp9LCBlcnJvciA9PiB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyByZXNwb25zZSDmi6bmiKrlmagKLy8g5Y+v5Lul5Zyo5o6l5Y+j5ZON5bqU5ZCO57uf5LiA5aSE55CG57uT5p6cCnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXNwb25zZSA9PiB7CiAgbGV0IHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgLy8g5aaC5p6c5piv6L+U5Zue55qE5paH5Lu2CiAgaWYgKHJlc3BvbnNlLmNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICdibG9iJykgewogICAgcmV0dXJuIHJlczsKICB9CiAgLy8g5YW85a655pyN5Yqh56uv6L+U5Zue55qE5a2X56ym5Liy5pWw5o2uCiAgaWYgKHR5cGVvZiByZXMgPT09ICdzdHJpbmcnKSB7CiAgICByZXMgPSByZXMgPyBKU09OLnBhcnNlKHJlcykgOiByZXM7CiAgfQogIC8vIOW9k+adg+mZkOmqjOivgeS4jemAmui/h+eahOaXtuWAmee7meWHuuaPkOekugogIGlmIChyZXMuY29kZSA9PT0gJzQwMScpIHsKICAgIGNvbnNvbGUud2FybignVG9rZW7pqozor4HlpLHotKXvvIzot7PovazliLDnmbvlvZXpobUnKTsKICAgIC8vIOa4hemZpOaXoOaViOeahOeUqOaIt+S/oeaBrwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXIiKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJtZW51cyIpOwogICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogIH0KICByZXR1cm4gcmVzOwp9LCBlcnJvciA9PiB7CiAgY29uc29sZS5lcnJvcign6K+35rGC6ZSZ6K+vOicsIGVycm9yKTsKCiAgLy8g572R57uc6ZSZ6K+v5aSE55CGCiAgaWYgKCFlcnJvci5yZXNwb25zZSkgewogICAgY29uc29sZS5lcnJvcign572R57uc6L+e5o6l5aSx6LSlJyk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCfnvZHnu5zov57mjqXlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zorr7nva4nKSk7CiAgfQoKICAvLyBIVFRQ54q25oCB56CB6ZSZ6K+v5aSE55CGCiAgY29uc3Qgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwogIHN3aXRjaCAoc3RhdHVzKSB7CiAgICBjYXNlIDQwMToKICAgICAgY29uc29sZS53YXJuKCfmnKrmjojmnYPorr/pl67vvIzot7PovazliLDnmbvlvZXpobUnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXIiKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIm1lbnVzIik7CiAgICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDQwMzoKICAgICAgY29uc29sZS53YXJuKCfmnYPpmZDkuI3otrMnKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDQwNDoKICAgICAgY29uc29sZS53YXJuKCfor7fmsYLnmoTotYTmupDkuI3lrZjlnKgnKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIDUwMDoKICAgICAgY29uc29sZS5lcnJvcign5pyN5Yqh5Zmo5YaF6YOo6ZSZ6K+vJyk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgY29uc29sZS5lcnJvcihg6K+35rGC5aSx6LSl77yM54q25oCB56CBOiAke3N0YXR1c31gKTsKICB9CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHJlcXVlc3Q7"},{"version":3,"names":["axios","router","request","create","baseURL","timeout","interceptors","use","config","headers","user","userStr","localStorage","getItem","JSON","parse","e","console","error","removeItem","token","Promise","reject","response","res","data","responseType","code","warn","push","Error","status"],"sources":["F:/1/smart/vue/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport router from \"@/router\";\r\n\r\nconst request = axios.create({\r\n    baseURL: 'http://localhost:9090',\r\n    timeout: 5000\r\n})\r\n\r\n// request 拦截器\r\n// 可以自请求发送前对请求做一些处理\r\n// 比如统一加token，对请求参数统一加密\r\nrequest.interceptors.request.use(config => {\r\n    config.headers['Content-Type'] = 'application/json;charset=utf-8';\r\n    let user = null;\r\n    try {\r\n        const userStr = localStorage.getItem(\"user\");\r\n        user = userStr ? JSON.parse(userStr) : null;\r\n    } catch (e) {\r\n        console.error('解析用户信息失败:', e);\r\n        localStorage.removeItem(\"user\"); // 清除损坏的数据\r\n        user = null;\r\n    }\r\n    \r\n    if (user && user.token) {\r\n        config.headers['token'] = user.token;  // 设置请求头\r\n    }\r\n\r\n    return config\r\n}, error => {\r\n    return Promise.reject(error)\r\n});\r\n\r\n// response 拦截器\r\n// 可以在接口响应后统一处理结果\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        // 如果是返回的文件\r\n        if (response.config.responseType === 'blob') {\r\n            return res\r\n        }\r\n        // 兼容服务端返回的字符串数据\r\n        if (typeof res === 'string') {\r\n            res = res ? JSON.parse(res) : res\r\n        }\r\n        // 当权限验证不通过的时候给出提示\r\n        if (res.code === '401') {\r\n            console.warn('Token验证失败，跳转到登录页');\r\n            // 清除无效的用户信息\r\n            localStorage.removeItem(\"user\");\r\n            localStorage.removeItem(\"menus\");\r\n            router.push(\"/login\");\r\n        }\r\n        return res;\r\n    },\r\n    error => {\r\n        console.error('请求错误:', error);\r\n        \r\n        // 网络错误处理\r\n        if (!error.response) {\r\n            console.error('网络连接失败');\r\n            return Promise.reject(new Error('网络连接失败，请检查网络设置'));\r\n        }\r\n        \r\n        // HTTP状态码错误处理\r\n        const status = error.response.status;\r\n        switch (status) {\r\n            case 401:\r\n                console.warn('未授权访问，跳转到登录页');\r\n                localStorage.removeItem(\"user\");\r\n                localStorage.removeItem(\"menus\");\r\n                router.push(\"/login\");\r\n                break;\r\n            case 403:\r\n                console.warn('权限不足');\r\n                break;\r\n            case 404:\r\n                console.warn('请求的资源不存在');\r\n                break;\r\n            case 500:\r\n                console.error('服务器内部错误');\r\n                break;\r\n            default:\r\n                console.error(`请求失败，状态码: ${status}`);\r\n        }\r\n        \r\n        return Promise.reject(error);\r\n    }\r\n)\r\n\r\n\r\nexport default request\r\n\r\n"],"mappings":"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","ignoreList":[]}]}