{"remainingRequest":"F:\\1\\smart\\vue\\node_modules\\babel-loader\\lib\\index.js!F:\\1\\smart\\vue\\src\\router\\index.js","dependencies":[{"path":"F:\\1\\smart\\vue\\src\\router\\index.js","mtime":1763511760629},{"path":"F:\\1\\smart\\vue\\babel.config.js","mtime":1718183300000},{"path":"F:\\1\\smart\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735803512432},{"path":"F:\\1\\smart\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735803514062}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUiOwpWdWUudXNlKFZ1ZVJvdXRlcik7CmNvbnN0IHJvdXRlcyA9IFt7CiAgcGF0aDogJy9sb2dpbicsCiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvTG9naW4udnVlJykKfSwgewogIHBhdGg6ICcvcmVnaXN0ZXInLAogIG5hbWU6ICdSZWdpc3RlcicsCiAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL1JlZ2lzdGVyLnZ1ZScpCn0sIHsKICBwYXRoOiAnLzQwNCcsCiAgbmFtZTogJzQwNCcsCiAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzLzQwNC52dWUnKQp9LCB7CiAgcGF0aDogJy9iaWctc2NyZWVuJywKICBuYW1lOiAnRmFybUJpZ1NjcmVlbicsCiAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL0Zhcm1CaWdTY3JlZW4udnVlJykKfSwgewogIHBhdGg6ICcvYmlnLXNjcmVlbi0zZCcsCiAgbmFtZTogJ0JpZ1NjcmVlbjNEJywKICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvQmlnU2NyZWVuM0QudnVlJykKfV07CmNvbnN0IHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICByb3V0ZXMKfSk7CgovLyDph43nva7ot6/nlLEKZXhwb3J0IGNvbnN0IHJlc2V0Um91dGVyID0gKCkgPT4gewogIHJvdXRlci5tYXRjaGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgICBtb2RlOiAnaGlzdG9yeScsCiAgICByb3V0ZXMKICB9KS5tYXRjaGVyOwp9OwoKLy8g5rOo5oSP77ya5Yi35paw6aG16Z2i5Lya5a+86Ie06aG16Z2i6Lev55Sx6YeN572uCmV4cG9ydCBjb25zdCBzZXRSb3V0ZXMgPSAoKSA9PiB7CiAgY29uc3Qgc3RvcmVNZW51cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJtZW51cyIpOwogIGlmIChzdG9yZU1lbnVzKSB7CiAgICAvLyDmi7zoo4XliqjmgIHot6/nlLEKICAgIGNvbnN0IG1hbmFnZVJvdXRlID0gewogICAgICBwYXRoOiAnLycsCiAgICAgIG5hbWU6ICdNYW5hZ2UnLAogICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvTWFuYWdlLnZ1ZScpLAogICAgICByZWRpcmVjdDogIi9ob21lIiwKICAgICAgY2hpbGRyZW46IFt7CiAgICAgICAgcGF0aDogJ3BlcnNvbicsCiAgICAgICAgbmFtZTogJ+S4quS6uuS/oeaBrycsCiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL1BlcnNvbi52dWUnKQogICAgICB9LCB7CiAgICAgICAgcGF0aDogJ3Bhc3N3b3JkJywKICAgICAgICBuYW1lOiAn5L+u5pS55a+G56CBJywKICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvUGFzc3dvcmQudnVlJykKICAgICAgfV0KICAgIH07CiAgICBsZXQgbWVudXMgPSBbXTsKICAgIHRyeSB7CiAgICAgIG1lbnVzID0gSlNPTi5wYXJzZShzdG9yZU1lbnVzKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q6I+c5Y2V5pWw5o2u5aSx6LSlOicsIGUpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgibWVudXMiKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbWVudXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgaWYgKGl0ZW0ucGF0aCkgewogICAgICAgIC8vIOW9k+S4lOS7heW9k3BhdGjkuI3kuLrnqbrnmoTml7blgJnmiY3ljrvorr7nva7ot6/nlLEKICAgICAgICBsZXQgaXRlbU1lbnUgPSB7CiAgICAgICAgICBwYXRoOiBpdGVtLnBhdGgucmVwbGFjZSgiLyIsICIiKSwKICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCcuLi92aWV3cy8nICsgaXRlbS5wYWdlUGF0aCArICcudnVlJykKICAgICAgICB9OwogICAgICAgIG1hbmFnZVJvdXRlLmNoaWxkcmVuLnB1c2goaXRlbU1lbnUpOwogICAgICB9IGVsc2UgaWYgKGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgaWYgKGl0ZW0ucGF0aCkgewogICAgICAgICAgICBsZXQgaXRlbU1lbnUgPSB7CiAgICAgICAgICAgICAgcGF0aDogaXRlbS5wYXRoLnJlcGxhY2UoIi8iLCAiIiksCiAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCcuLi92aWV3cy8nICsgaXRlbS5wYWdlUGF0aCArICcudnVlJykKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbWFuYWdlUm91dGUuY2hpbGRyZW4ucHVzaChpdGVtTWVudSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOiOt+WPluW9k+WJjeeahOi3r+eUseWvueixoeWQjeensOaVsOe7hAogICAgY29uc3QgY3VycmVudFJvdXRlTmFtZXMgPSByb3V0ZXIuZ2V0Um91dGVzKCkubWFwKHYgPT4gdi5uYW1lKTsKICAgIGlmICghY3VycmVudFJvdXRlTmFtZXMuaW5jbHVkZXMoJ01hbmFnZScpKSB7CiAgICAgIC8vIOWKqOaAgea3u+WKoOWIsOeOsOWcqOeahOi3r+eUseWvueixoeS4reWOuwogICAgICByb3V0ZXIuYWRkUm91dGUobWFuYWdlUm91dGUpOwogICAgfQogIH0KfTsKCi8vIOavj+asoeWIt+aWsOmhtemdoumDveimgemHjeaWsOiuvue9rui3r+eUse+8jOWQpuWImei3r+eUseWwseS8muiiq+mHjee9rgpzZXRSb3V0ZXMoKTsKcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tLCBuZXh0KSA9PiB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImN1cnJlbnRQYXRoTmFtZSIsIHRvLm5hbWUpOyAvLyDorr7nva7lvZPliY3nmoTot6/nlLHlkI3np7AKICBzdG9yZS5jb21taXQoInNldFBhdGgiKTsKICBpZiAoIXRvLm1hdGNoZWQubGVuZ3RoKSB7CiAgICBjb25zdCBtZW51cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJtZW51cyIpOwogICAgaWYgKCFtZW51cykgewogICAgICBuZXh0KCIvbG9naW4iKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoIi80MDQiKTsKICAgIH0KICB9IGVsc2UgewogICAgbmV4dCgpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"names":["Vue","VueRouter","store","use","routes","path","name","component","router","mode","resetRouter","matcher","setRoutes","storeMenus","localStorage","getItem","manageRoute","redirect","children","menus","JSON","parse","e","console","error","removeItem","forEach","item","itemMenu","replace","pagePath","push","length","currentRouteNames","getRoutes","map","v","includes","addRoute","beforeEach","to","from","next","setItem","commit","matched"],"sources":["F:/1/smart/vue/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport store from \"@/store\";\r\n\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: () => import('../views/Login.vue')\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'Register',\r\n    component: () => import('../views/Register.vue')\r\n  },\r\n  {\r\n    path: '/404',\r\n    name: '404',\r\n    component: () => import('../views/404.vue')\r\n  },\r\n  {\r\n    path: '/big-screen',\r\n    name: 'FarmBigScreen',\r\n    component: () => import('../views/FarmBigScreen.vue')\r\n  },\r\n  {\r\n    path: '/big-screen-3d',\r\n    name: 'BigScreen3D',\r\n    component: () => import('../views/BigScreen3D.vue')\r\n  },\r\n\r\n\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  routes\r\n})\r\n\r\n// 重置路由\r\nexport const resetRouter = () => {\r\n  router.matcher = new VueRouter({\r\n    mode: 'history',\r\n    routes\r\n  }).matcher\r\n}\r\n\r\n// 注意：刷新页面会导致页面路由重置\r\nexport const setRoutes = () => {\r\n  const storeMenus = localStorage.getItem(\"menus\");\r\n  if (storeMenus) {\r\n    // 拼装动态路由\r\n    const manageRoute = { path: '/', name: 'Manage', component: () => import('../views/Manage.vue'), redirect: \"/home\", children: [\r\n        { path: 'person', name: '个人信息', component: () => import('../views/Person.vue')},\r\n        { path: 'password', name: '修改密码', component: () => import('../views/Password.vue')},\r\n      ] }\r\n    \r\n    let menus = [];\r\n    try {\r\n      menus = JSON.parse(storeMenus);\r\n    } catch (e) {\r\n      console.error('解析菜单数据失败:', e);\r\n      localStorage.removeItem(\"menus\");\r\n      return;\r\n    }\r\n    menus.forEach(item => {\r\n      if (item.path) {  // 当且仅当path不为空的时候才去设置路由\r\n        let itemMenu = { path: item.path.replace(\"/\", \"\"), name: item.name, component: () => import('../views/' + item.pagePath + '.vue')}\r\n        manageRoute.children.push(itemMenu)\r\n      } else if(item.children.length) {\r\n        item.children.forEach(item => {\r\n          if (item.path) {\r\n            let itemMenu = { path: item.path.replace(\"/\", \"\"), name: item.name, component: () => import('../views/' + item.pagePath + '.vue')}\r\n            manageRoute.children.push(itemMenu)\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    // 获取当前的路由对象名称数组\r\n    const currentRouteNames = router.getRoutes().map(v => v.name)\r\n    if (!currentRouteNames.includes('Manage')) {\r\n      // 动态添加到现在的路由对象中去\r\n      router.addRoute(manageRoute)\r\n    }\r\n  }\r\n}\r\n\r\n// 每次刷新页面都要重新设置路由，否则路由就会被重置\r\nsetRoutes()\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  localStorage.setItem(\"currentPathName\", to.name)  // 设置当前的路由名称\r\n  store.commit(\"setPath\")\r\n  if (!to.matched.length) {\r\n    const menus = localStorage.getItem(\"menus\")\r\n    if (!menus) {\r\n      next(\"/login\")\r\n    } else {\r\n      next(\"/404\")\r\n    }\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router\r\n"],"mappings":"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","ignoreList":[]}]}