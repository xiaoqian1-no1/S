{"remainingRequest":"F:\\1\\smart\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\1\\smart\\vue\\src\\views\\FarmMapGaode.vue?vue&type=style&index=0&id=e14d04ac&scoped=true&lang=css","dependencies":[{"path":"F:\\1\\smart\\vue\\src\\views\\FarmMapGaode.vue","mtime":1763470482019},{"path":"F:\\1\\smart\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1735803513193},{"path":"F:\\1\\smart\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1735803515658},{"path":"F:\\1\\smart\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1735803514041},{"path":"F:\\1\\smart\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735803512432},{"path":"F:\\1\\smart\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1735803514728}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZ2FvZGUtbWFwLXBhZ2Ugew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDB2aDsNCiAgYmFja2dyb3VuZDogI2Y1ZjdmYTsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCg0KLyog6aG26YOo5L+h5oGv5qCPICovDQoudG9wLWJhciB7DQogIGhlaWdodDogNjBweDsNCiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsNCiAgZGlzcGxheTogZmxleDsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICBwYWRkaW5nOiAwIDMwcHg7DQogIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOw0KICB6LWluZGV4OiAxMDA7DQogIGZsZXgtc2hyaW5rOiAwOw0KfQ0KDQoudGl0bGUgew0KICBmb250LXNpemU6IDI0cHg7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICBjb2xvcjogd2hpdGU7DQogIGRpc3BsYXk6IGZsZXg7DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIGdhcDogMTBweDsNCn0NCg0KLnBvc2l0aW9uLWluZm8gew0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBnYXA6IDhweDsNCiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOw0KICBwYWRkaW5nOiA4cHggMTZweDsNCiAgYm9yZGVyLXJhZGl1czogMjBweDsNCiAgY29sb3I6IHdoaXRlOw0KICBmb250LXNpemU6IDE0cHg7DQp9DQoNCi8qIOS4u+WGheWuueWMuiAqLw0KLm1haW4tY29udGFpbmVyIHsNCiAgZmxleDogMTsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAyMHB4Ow0KICBwYWRkaW5nOiAyMHB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBtaW4taGVpZ2h0OiAwOw0KfQ0KDQovKiDlt6bkvqfpnaLmnb8gKi8NCi5sZWZ0LXBhbmVsIHsNCiAgd2lkdGg6IDM1MHB4Ow0KICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgYm9yZGVyLXJhZGl1czogMTJweDsNCiAgYm94LXNoYWRvdzogMCAycHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSk7DQogIGRpc3BsYXk6IGZsZXg7DQogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogIG92ZXJmbG93OiBoaWRkZW47DQogIGZsZXgtc2hyaW5rOiAwOw0KfQ0KDQoucGFuZWwtaGVhZGVyIHsNCiAgcGFkZGluZzogMTZweDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCn0NCg0KLnBhbmVsLWhlYWRlciBoMyB7DQogIG1hcmdpbjogMDsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBjb2xvcjogIzMzMzsNCn0NCg0KLnNlYXJjaC1ib3ggew0KICBwYWRkaW5nOiAxMnB4IDE2cHg7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KfQ0KDQouZmFybS1saXN0LWNvbnRhaW5lciB7DQogIGZsZXg6IDE7DQogIG92ZXJmbG93LXk6IGF1dG87DQogIHBhZGRpbmc6IDEycHg7DQp9DQoNCi5lbXB0eS10aXAgew0KICBwYWRkaW5nOiA0MHB4IDIwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCg0KLyog5Yac5Zy65YiX6KGo6aG5ICovDQouZmFybS1pdGVtIHsNCiAgZGlzcGxheTogZmxleDsNCiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7DQogIGdhcDogMTJweDsNCiAgcGFkZGluZzogMTRweDsNCiAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgYmFja2dyb3VuZDogI2ZhZmFmYTsNCiAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHRyYW5zaXRpb246IGFsbCAwLjNzOw0KICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsNCn0NCg0KLmZhcm0taXRlbTpob3ZlciB7DQogIGJhY2tncm91bmQ6ICNlOGY1ZTk7DQogIGJvcmRlci1jb2xvcjogIzRjYWY1MDsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDRweCk7DQp9DQoNCi5mYXJtLWl0ZW0uYWN0aXZlIHsNCiAgYmFja2dyb3VuZDogI2U4ZjVlOTsNCiAgYm9yZGVyLWNvbG9yOiAjNGNhZjUwOw0KfQ0KDQouZmFybS1pY29uIHsNCiAgZm9udC1zaXplOiAyOHB4Ow0KICBmbGV4LXNocmluazogMDsNCn0NCg0KLmZhcm0taW5mbyB7DQogIGZsZXg6IDE7DQogIG1pbi13aWR0aDogMDsNCn0NCg0KLmZhcm0tbmFtZSB7DQogIGZvbnQtc2l6ZTogMTVweDsNCiAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgY29sb3I6ICMzMzM7DQogIG1hcmdpbi1ib3R0b206IDZweDsNCn0NCg0KLmZhcm0tZGV0YWlscyB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGdhcDogMTJweDsNCiAgbWFyZ2luLWJvdHRvbTogNHB4Ow0KfQ0KDQouZGV0YWlsLWl0ZW0gew0KICBmb250LXNpemU6IDEycHg7DQogIGNvbG9yOiAjNjY2Ow0KfQ0KDQouZmFybS1hZGRyZXNzIHsNCiAgZm9udC1zaXplOiAxMnB4Ow0KICBjb2xvcjogIzk5OTsNCiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQp9DQoNCi8qIOWPs+S+p+WcsOWbvumdouadvyAqLw0KLnJpZ2h0LW1hcC1wYW5lbCB7DQogIGZsZXg6IDE7DQogIGJhY2tncm91bmQ6IHdoaXRlOw0KICBib3JkZXItcmFkaXVzOiAxMnB4Ow0KICBib3gtc2hhZG93OiAwIDJweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBtaW4taGVpZ2h0OiA2MDBweDsNCn0NCg0KLmxvYWRpbmctb3ZlcmxheSB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgYm90dG9tOiAwOw0KICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpOw0KICBkaXNwbGF5OiBmbGV4Ow0KICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgei1pbmRleDogMTAwMDsNCiAgZ2FwOiAxNXB4Ow0KfQ0KDQoubG9hZGluZy1vdmVybGF5IHAgew0KICBmb250LXNpemU6IDE0cHg7DQogIGNvbG9yOiAjNjY2Ow0KfQ0KDQoubWFwLWNvbnRhaW5lciB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIG1pbi1oZWlnaHQ6IDYwMHB4Ow0KfQ0KDQovKiDlnLDlm77mjqfliLbmjInpkq4gKi8NCi5tYXAtY29udHJvbHMgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMjBweDsNCiAgcmlnaHQ6IDIwcHg7DQogIHotaW5kZXg6IDEwOw0KfQ0KDQovKiDmu5rliqjmnaHnvo7ljJYgKi8NCi5mYXJtLWxpc3QtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhciB7DQogIHdpZHRoOiA2cHg7DQp9DQoNCi5mYXJtLWxpc3QtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7DQogIGJhY2tncm91bmQ6ICNmMWYxZjE7DQogIGJvcmRlci1yYWRpdXM6IDNweDsNCn0NCg0KLmZhcm0tbGlzdC1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsNCiAgYmFja2dyb3VuZDogIzRjYWY1MDsNCiAgYm9yZGVyLXJhZGl1czogM3B4Ow0KfQ0KDQouZmFybS1saXN0LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgew0KICBiYWNrZ3JvdW5kOiAjNDVhMDQ5Ow0KfQ0KDQovKiDpmpDol4/pq5jlvrflnLDlm75sb2dvICovDQo6ZGVlcCguYW1hcC1sb2dvKSB7DQogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCn0NCg0KOmRlZXAoLmFtYXAtY29weXJpZ2h0KSB7DQogIG9wYWNpdHk6IDAuMzsNCn0NCg=="},{"version":3,"sources":["FarmMapGaode.vue"],"names":[],"mappings":";AAgaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"FarmMapGaode.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"gaode-map-page\">\r\n    <!-- È°∂ÈÉ®‰ø°ÊÅØÊ†è -->\r\n    <div class=\"top-bar\">\r\n      <div class=\"title\">\r\n        <i class=\"el-icon-map-location\"></i>\r\n        ÂÜúÂú∫Âú∞ÁêÜÂú∞Âõæ\r\n      </div>\r\n      <div class=\"position-info\">\r\n        <i class=\"el-icon-location-outline\"></i>\r\n        <span>{{ currentLocation }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->\r\n    <div class=\"main-container\">\r\n      <!-- Â∑¶‰æßÔºöÂÜúÂú∫ÂàóË°® -->\r\n      <div class=\"left-panel\">\r\n        <div class=\"panel-header\">\r\n          <h3>ÂÜúÂú∫ÂàóË°®</h3>\r\n          <el-button size=\"small\" type=\"success\" icon=\"el-icon-refresh\" @click=\"loadFarms\">Âà∑Êñ∞</el-button>\r\n        </div>\r\n\r\n        <!-- ÊêúÁ¥¢Ê°Ü -->\r\n        <div class=\"search-box\">\r\n          <el-input\r\n            v-model=\"searchKeyword\"\r\n            placeholder=\"ÊêúÁ¥¢ÂÜúÂú∫ÂêçÁß∞Êàñ‰ΩúÁâ©\"\r\n            prefix-icon=\"el-icon-search\"\r\n            size=\"small\"\r\n            clearable\r\n          ></el-input>\r\n        </div>\r\n\r\n        <!-- ÂÜúÂú∫ÂàóË°®ÔºàÊåâÂú∞ÂùÄÂàÜÁªÑÔºâ -->\r\n        <div class=\"farm-list-container\">\r\n          <div v-if=\"filteredFarms.length === 0\" class=\"empty-tip\">\r\n            <el-empty description=\"ÊöÇÊó†ÂÜúÂú∫Êï∞ÊçÆ\" :image-size=\"80\"></el-empty>\r\n          </div>\r\n\r\n          <div\r\n            v-for=\"(farm, index) in filteredFarms\"\r\n            :key=\"farm.id || index\"\r\n            class=\"farm-item\"\r\n            :class=\"{ active: selectedFarm && selectedFarm.id === farm.id }\"\r\n            @click=\"selectFarm(farm)\"\r\n          >\r\n            <div class=\"farm-icon\">üåæ</div>\r\n            <div class=\"farm-info\">\r\n              <div class=\"farm-name\">{{ farm.farm }}</div>\r\n              <div class=\"farm-details\">\r\n                <span class=\"detail-item\">üå± {{ farm.crop }}</span>\r\n                <span class=\"detail-item\">üìè {{ farm.area }}‰∫©</span>\r\n              </div>\r\n              <div class=\"farm-address\">üìç {{ farm.address || 'ÊöÇÊó†Âú∞ÂùÄ' }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Âè≥‰æßÔºöÂú∞Âõæ -->\r\n      <div class=\"right-map-panel\">\r\n        <!-- Âä†ËΩΩÊèêÁ§∫ -->\r\n        <div v-if=\"!mapLoaded\" class=\"loading-overlay\">\r\n          <el-spinner></el-spinner>\r\n          <p>Âú∞ÂõæÂä†ËΩΩ‰∏≠...</p>\r\n        </div>\r\n\r\n        <div id=\"gaode-container\" class=\"map-container\"></div>\r\n        \r\n        <!-- Âú∞ÂõæÊéßÂà∂ÊåâÈíÆ -->\r\n        <div class=\"map-controls\">\r\n          <el-button-group>\r\n            <el-tooltip content=\"ÊîæÂ§ß\" placement=\"left\">\r\n              <el-button size=\"mini\" icon=\"el-icon-zoom-in\" @click=\"zoomIn\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip content=\"Áº©Â∞è\" placement=\"left\">\r\n              <el-button size=\"mini\" icon=\"el-icon-zoom-out\" @click=\"zoomOut\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip content=\"ÂÆö‰Ωç\" placement=\"left\">\r\n              <el-button size=\"mini\" icon=\"el-icon-location\" @click=\"autoLocate\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip content=\"ÈáçÁΩÆ\" placement=\"left\">\r\n              <el-button size=\"mini\" icon=\"el-icon-refresh\" @click=\"resetView\"></el-button>\r\n            </el-tooltip>\r\n          </el-button-group>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'FarmMapGaode',\r\n  data() {\r\n    return {\r\n      map: null,\r\n      amapKey: 'a0dc4534ab26be714e94cef345e480aa', // ‰ΩøÁî®Âõ∫ÂÆöKeyÔºåÈÅøÂÖç‰æùËµñÂêéÁ´Ø\r\n      currentLocation: 'Âº†ÂÆ∂ÁïåÂ∏Ç',\r\n      searchKeyword: '',\r\n      allFarms: [],\r\n      selectedFarm: null,\r\n      farmMarkers: [],\r\n      mapLoaded: false\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    // ËøáÊª§ÂÜúÂú∫\r\n    filteredFarms() {\r\n      if (!this.searchKeyword) {\r\n        return this.allFarms;\r\n      }\r\n      const keyword = this.searchKeyword.toLowerCase();\r\n      return this.allFarms.filter(farm => {\r\n        const name = (farm.farm || '').toLowerCase();\r\n        const crop = (farm.crop || '').toLowerCase();\r\n        return name.includes(keyword) || crop.includes(keyword);\r\n      });\r\n    }\r\n  },\r\n  \r\n  mounted() {\r\n    this.loadAmapScript();\r\n    this.loadFarms();\r\n  },\r\n  \r\n  beforeDestroy() {\r\n    if (this.map) {\r\n      this.map.destroy();\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    // Âä†ËΩΩÈ´òÂæ∑Âú∞ÂõæSDK\r\n    loadAmapScript() {\r\n      if (window.AMap) {\r\n        this.createMap();\r\n        return;\r\n      }\r\n      \r\n      const script = document.createElement('script');\r\n      script.src = `https://webapi.amap.com/maps?v=2.0&key=${this.amapKey}&plugin=AMap.Marker,AMap.InfoWindow,AMap.ToolBar`;\r\n      \r\n      script.onload = () => {\r\n        console.log('‚úÖ È´òÂæ∑Âú∞ÂõæSDKÂä†ËΩΩÊàêÂäü');\r\n        this.createMap();\r\n      };\r\n      \r\n      script.onerror = () => {\r\n        console.error('‚ùå Âú∞ÂõæSDKÂä†ËΩΩÂ§±Ë¥•');\r\n        this.$message.error('Âú∞ÂõæÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªú');\r\n      };\r\n      \r\n      document.head.appendChild(script);\r\n    },\r\n    \r\n    // ÂàõÂª∫Âú∞Âõæ\r\n    createMap() {\r\n      if (!window.AMap) {\r\n        console.error('AMapÊú™Âä†ËΩΩ');\r\n        return;\r\n      }\r\n      \r\n      this.$nextTick(() => {\r\n        const container = document.getElementById('gaode-container');\r\n        if (!container) {\r\n          setTimeout(() => this.createMap(), 100);\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          // ÂàõÂª∫3DÂú∞Âõæ\r\n          this.map = new window.AMap.Map('gaode-container', {\r\n            viewMode: '3D',\r\n            pitch: 60,\r\n            zoom: 13,\r\n            center: [110.479, 29.117], // Âº†ÂÆ∂ÁïåÂ∏Ç‰∏≠ÂøÉ\r\n            showBuildingBlock: true,\r\n            resizeEnable: true\r\n          });\r\n          \r\n          // Ê∑ªÂä†Âç´ÊòüÂõæÂ±Ç\r\n          this.map.addLayer(new window.AMap.TileLayer.Satellite());\r\n          this.map.addLayer(new window.AMap.TileLayer.RoadNet());\r\n          \r\n          // Ê∑ªÂä†Â∑•ÂÖ∑Ê†è\r\n          this.map.addControl(new window.AMap.ToolBar({\r\n            locate: true\r\n          }));\r\n          \r\n          this.mapLoaded = true;\r\n          console.log('‚úÖ Âú∞ÂõæÂàõÂª∫ÊàêÂäü');\r\n          this.$message.success('Âú∞ÂõæÂä†ËΩΩÊàêÂäü');\r\n          \r\n          // Ê∏≤ÊüìÂÜúÂú∫Ê†áËÆ∞\r\n          if (this.allFarms.length > 0) {\r\n            this.renderFarmMarkers();\r\n          }\r\n        } catch (error) {\r\n          console.error('Âú∞ÂõæÂàõÂª∫Â§±Ë¥•:', error);\r\n          this.$message.error('Âú∞ÂõæÂàõÂª∫Â§±Ë¥•');\r\n        }\r\n      });\r\n    },\r\n    \r\n    // Âä†ËΩΩÂÜúÂú∫Êï∞ÊçÆ\r\n    async loadFarms() {\r\n      try {\r\n        const res = await this.request.get('/statistic/page', {\r\n          params: {\r\n            pageNum: 1,\r\n            pageSize: 1000,\r\n            farm: ''\r\n          }\r\n        });\r\n        \r\n        if (res.code === '200' && res.data && res.data.records) {\r\n          this.allFarms = res.data.records;\r\n          console.log('‚úÖ Âä†ËΩΩÂÜúÂú∫Êï∞ÊçÆÊàêÂäü:', this.allFarms.length);\r\n          \r\n          // Â¶ÇÊûúÂú∞ÂõæÂ∑≤Âä†ËΩΩÔºåÊ∏≤ÊüìÊ†áËÆ∞\r\n          if (this.mapLoaded) {\r\n            this.renderFarmMarkers();\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÂÜúÂú∫Êï∞ÊçÆÂ§±Ë¥•:', error);\r\n        this.$message.error('Âä†ËΩΩÂÜúÂú∫Êï∞ÊçÆÂ§±Ë¥•');\r\n      }\r\n    },\r\n    \r\n    // Ê∏≤ÊüìÂÜúÂú∫Ê†áËÆ∞\r\n    renderFarmMarkers() {\r\n      if (!this.map || !window.AMap || this.allFarms.length === 0) return;\r\n      \r\n      // Ê∏ÖÈô§Áé∞ÊúâÊ†áËÆ∞\r\n      this.farmMarkers.forEach(marker => marker.setMap(null));\r\n      this.farmMarkers = [];\r\n      \r\n      const baseCenter = this.map.getCenter();\r\n      \r\n      this.allFarms.forEach((farm, index) => {\r\n        // ‰ΩøÁî®ÈªÑÈáëËßíÂàÜÂ∏ÉÁÆóÊ≥ïÂàÜÂ∏ÉÂÜúÂú∫Ê†áËÆ∞\r\n        const angle = (index * 137.5) * Math.PI / 180;\r\n        const distance = 0.008 + (index % 8) * 0.004;\r\n        \r\n        const position = [\r\n          baseCenter.lng + Math.cos(angle) * distance,\r\n          baseCenter.lat + Math.sin(angle) * distance\r\n        ];\r\n        \r\n        // ÂàõÂª∫Ê†áËÆ∞\r\n        const marker = new window.AMap.Marker({\r\n          position: position,\r\n          title: farm.farm,\r\n          label: {\r\n            content: `<div style=\"background: #4caf50; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.3); white-space: nowrap;\">${farm.farm}</div>`,\r\n            direction: 'top',\r\n            offset: new window.AMap.Pixel(0, -10)\r\n          }\r\n        });\r\n        \r\n        marker.setMap(this.map);\r\n        \r\n        // ÂàõÂª∫‰ø°ÊÅØÁ™óÂè£\r\n        const infoWindow = new window.AMap.InfoWindow({\r\n          content: this.createInfoWindowContent(farm),\r\n          offset: new window.AMap.Pixel(0, -30)\r\n        });\r\n        \r\n        marker.on('click', () => {\r\n          infoWindow.open(this.map, marker.getPosition());\r\n          this.selectedFarm = farm;\r\n        });\r\n        \r\n        this.farmMarkers.push(marker);\r\n      });\r\n      \r\n      console.log('‚úÖ Ê∏≤Êüì‰∫Ü', this.farmMarkers.length, '‰∏™ÂÜúÂú∫Ê†áËÆ∞');\r\n    },\r\n    \r\n    // ÂàõÂª∫‰ø°ÊÅØÁ™óÂè£ÂÜÖÂÆπ\r\n    createInfoWindowContent(farm) {\r\n      return `\r\n        <div style=\"padding: 15px; min-width: 250px; font-family: Arial, sans-serif;\">\r\n          <h3 style=\"margin: 0 0 12px 0; color: #2e7d32; font-size: 16px; border-bottom: 2px solid #4caf50; padding-bottom: 8px;\">\r\n            ${farm.farm}\r\n          </h3>\r\n          <p style=\"margin: 6px 0; color: #666; font-size: 14px;\">\r\n            <strong>üåæ ‰ΩúÁâ©Ôºö</strong>${farm.crop || 'Êú™Áü•'}\r\n          </p>\r\n          <p style=\"margin: 6px 0; color: #666; font-size: 14px;\">\r\n            <strong>üìè Èù¢ÁßØÔºö</strong>${farm.area || 'Êú™Áü•'}‰∫©\r\n          </p>\r\n          <p style=\"margin: 6px 0; color: #666; font-size: 14px;\">\r\n            <strong>üå± Êï∞ÈáèÔºö</strong>${farm.number || 0}Ê†™\r\n          </p>\r\n          <p style=\"margin: 6px 0; color: #666; font-size: 14px;\">\r\n            <strong>üìä Áä∂ÊÄÅÔºö</strong><span style=\"color: ${farm.state === 'Ê≠£Â∏∏' ? '#67c23a' : '#e6a23c'}\">${farm.state || 'Êú™Áü•'}</span>\r\n          </p>\r\n          <p style=\"margin: 6px 0; color: #666; font-size: 14px;\">\r\n            <strong>üë§ Ë¥üË¥£‰∫∫Ôºö</strong>${farm.keeper || 'Êú™Áü•'}\r\n          </p>\r\n          <p style=\"margin: 6px 0; color: #999; font-size: 12px;\">\r\n            üìç ${farm.address || 'ÊöÇÊó†Âú∞ÂùÄ'}\r\n          </p>\r\n        </div>\r\n      `;\r\n    },\r\n    \r\n    // ÈÄâÊã©ÂÜúÂú∫\r\n    selectFarm(farm) {\r\n      if (!this.map || !this.mapLoaded) {\r\n        this.$message.warning('Âú∞ÂõæÊú™Âä†ËΩΩÂÆåÊàê');\r\n        return;\r\n      }\r\n      \r\n      this.selectedFarm = farm;\r\n      \r\n      // ÊâæÂà∞ÂØπÂ∫îÁöÑÊ†áËÆ∞\r\n      const marker = this.farmMarkers.find(m => m.getTitle() === farm.farm);\r\n      \r\n      if (marker) {\r\n        const position = marker.getPosition();\r\n        \r\n        // ÂÆö‰ΩçÂà∞ËØ•ÂÜúÂú∫\r\n        this.map.setCenter(position);\r\n        this.map.setZoom(16);\r\n        \r\n        // ÂàõÂª∫Âπ∂ÊòæÁ§∫‰ø°ÊÅØÁ™óÂè£\r\n        const infoWindow = new window.AMap.InfoWindow({\r\n          content: this.createInfoWindowContent(farm),\r\n          offset: new window.AMap.Pixel(0, -30)\r\n        });\r\n        \r\n        infoWindow.open(this.map, position);\r\n        \r\n        // Ê∑ªÂä†Ë∑≥Âä®Âä®ÁîªÊ†áËÆ∞\r\n        const highlightMarker = new window.AMap.Marker({\r\n          position: position,\r\n          icon: new window.AMap.Icon({\r\n            size: new window.AMap.Size(40, 40),\r\n            image: 'data:image/svg+xml;base64,' + btoa(`\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\">\r\n                <circle cx=\"20\" cy=\"20\" r=\"18\" fill=\"#ff4444\" stroke=\"#fff\" stroke-width=\"3\"/>\r\n                <circle cx=\"20\" cy=\"20\" r=\"8\" fill=\"#fff\"/>\r\n              </svg>\r\n            `),\r\n            imageSize: new window.AMap.Size(40, 40)\r\n          }),\r\n          zIndex: 200,\r\n          animation: 'AMAP_ANIMATION_BOUNCE'\r\n        });\r\n        \r\n        highlightMarker.setMap(this.map);\r\n        \r\n        // 5ÁßíÂêéÁßªÈô§È´ò‰∫Æ\r\n        setTimeout(() => {\r\n          highlightMarker.setMap(null);\r\n        }, 5000);\r\n        \r\n        this.$message.success(`Â∑≤ÂÆö‰ΩçÂà∞Ôºö${farm.farm}`);\r\n      }\r\n    },\r\n    \r\n    // Ëá™Âä®ÂÆö‰Ωç\r\n    autoLocate() {\r\n      if (!this.map) return;\r\n      \r\n      if (navigator.geolocation) {\r\n        const loading = this.$loading({ text: 'ÂÆö‰Ωç‰∏≠...' });\r\n        \r\n        navigator.geolocation.getCurrentPosition(\r\n          (position) => {\r\n            const { longitude, latitude } = position.coords;\r\n            this.map.setCenter([longitude, latitude]);\r\n            this.map.setZoom(16);\r\n            this.currentLocation = `${latitude.toFixed(6)}, ${longitude.toFixed(6)}`;\r\n            \r\n            loading.close();\r\n            this.$message.success('ÂÆö‰ΩçÊàêÂäü');\r\n          },\r\n          (error) => {\r\n            loading.close();\r\n            console.error('ÂÆö‰ΩçÂ§±Ë¥•:', error);\r\n            this.$message.warning('ÂÆö‰ΩçÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§‰ΩçÁΩÆ');\r\n          }\r\n        );\r\n      } else {\r\n        this.$message.error('ÊµèËßàÂô®‰∏çÊîØÊåÅÂÆö‰ΩçÂäüËÉΩ');\r\n      }\r\n    },\r\n    \r\n    // Âú∞ÂõæÊéßÂà∂\r\n    zoomIn() {\r\n      if (this.map) this.map.zoomIn();\r\n    },\r\n    \r\n    zoomOut() {\r\n      if (this.map) this.map.zoomOut();\r\n    },\r\n    \r\n    resetView() {\r\n      if (this.map) {\r\n        this.map.setZoomAndCenter(13, [110.479, 29.117]);\r\n        this.map.setPitch(60);\r\n        this.$message.success('ËßÜÂõæÂ∑≤ÈáçÁΩÆ');\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.gaode-map-page {\r\n  width: 100%;\r\n  height: 100vh;\r\n  background: #f5f7fa;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n/* È°∂ÈÉ®‰ø°ÊÅØÊ†è */\r\n.top-bar {\r\n  height: 60px;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 30px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  z-index: 100;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.title {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.position-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  color: white;\r\n  font-size: 14px;\r\n}\r\n\r\n/* ‰∏ªÂÜÖÂÆπÂå∫ */\r\n.main-container {\r\n  flex: 1;\r\n  display: flex;\r\n  gap: 20px;\r\n  padding: 20px;\r\n  overflow: hidden;\r\n  min-height: 0;\r\n}\r\n\r\n/* Â∑¶‰æßÈù¢Êùø */\r\n.left-panel {\r\n  width: 350px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.panel-header {\r\n  padding: 16px;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.panel-header h3 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #333;\r\n}\r\n\r\n.search-box {\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.farm-list-container {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 12px;\r\n}\r\n\r\n.empty-tip {\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n}\r\n\r\n/* ÂÜúÂú∫ÂàóË°®È°π */\r\n.farm-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n  padding: 14px;\r\n  margin-bottom: 10px;\r\n  background: #fafafa;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  border: 2px solid transparent;\r\n}\r\n\r\n.farm-item:hover {\r\n  background: #e8f5e9;\r\n  border-color: #4caf50;\r\n  transform: translateX(4px);\r\n}\r\n\r\n.farm-item.active {\r\n  background: #e8f5e9;\r\n  border-color: #4caf50;\r\n}\r\n\r\n.farm-icon {\r\n  font-size: 28px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.farm-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.farm-name {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.farm-details {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.detail-item {\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n\r\n.farm-address {\r\n  font-size: 12px;\r\n  color: #999;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n/* Âè≥‰æßÂú∞ÂõæÈù¢Êùø */\r\n.right-map-panel {\r\n  flex: 1;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  position: relative;\r\n  min-height: 600px;\r\n}\r\n\r\n.loading-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  gap: 15px;\r\n}\r\n\r\n.loading-overlay p {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.map-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 600px;\r\n}\r\n\r\n/* Âú∞ÂõæÊéßÂà∂ÊåâÈíÆ */\r\n.map-controls {\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 20px;\r\n  z-index: 10;\r\n}\r\n\r\n/* ÊªöÂä®Êù°ÁæéÂåñ */\r\n.farm-list-container::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.farm-list-container::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.farm-list-container::-webkit-scrollbar-thumb {\r\n  background: #4caf50;\r\n  border-radius: 3px;\r\n}\r\n\r\n.farm-list-container::-webkit-scrollbar-thumb:hover {\r\n  background: #45a049;\r\n}\r\n\r\n/* ÈöêËóèÈ´òÂæ∑Âú∞Âõælogo */\r\n:deep(.amap-logo) {\r\n  display: none !important;\r\n}\r\n\r\n:deep(.amap-copyright) {\r\n  opacity: 0.3;\r\n}\r\n</style>\r\n\r\n"]}]}